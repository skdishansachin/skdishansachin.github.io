---
import Layout from "@/components/Layout.astro";
import type { CollectionEntry } from "astro:content";
import { render } from "astro:content";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
	const posts = await getCollection("posts", ({ data }) => {
		return !data.hidden;
	});
	
	return posts.map((post) => ({
		params: { slug: post.id },
		props: post,
	}));
}

type Props = CollectionEntry<"posts">;

const post = Astro.props;
const { Content, remarkPluginFrontmatter } = await render(post);
const { title, date } = post.data;
---

<Layout title={title} ogId={post.id}>
	<a href="/" class="mb-4 block">Go back</a>
	<h1
		class="text-3xl font-semibold text-pretty leading-tight sm:text-4.5xl sm:font-bold"
	>
		{title}
	</h1>
	
	<p class="mt-4 text-lg text-zinc-450 flex gap-4">
		<span>{remarkPluginFrontmatter.minutesRead}</span>
		<span>{date}</span>
	</p>
	<div class="mt-10 max-w-none prose">
		<Content />
	</div>
</Layout>
